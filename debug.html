<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Moltbot Site Debug</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: #f4f4f4; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” Moltbot Site æ•°æ®åŠ è½½è°ƒè¯•</h1>
    <div id="output"></div>

    <script>
        const output = document.getElementById('output');

        function log(message, type = 'info') {
            console.log(message);
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            output.appendChild(div);
        }

        async function testLoading() {
            try {
                log('=== å¼€å§‹æµ‹è¯•æ•°æ®åŠ è½½ ===', 'info');

                // Test 1: Load config
                log('\n1. æµ‹è¯•åŠ è½½ config.json...', 'info');
                try {
                    const configRes = await fetch('/data/config.json');
                    if (!configRes.ok) throw new Error(`HTTP ${configRes.status}`);
                    const config = await configRes.json();
                    log(`âœ… Config loaded successfully`, 'success');
                    log(`   - Site title: ${config.config?.site?.title}`);
                    log(`   - Skills categories: ${config.config?.skills?.categories?.length}`);
                } catch (e) {
                    log(`âŒ Config failed: ${e.message}`, 'error');
                }

                // Test 2: Load news
                log('\n2. æµ‹è¯•åŠ è½½æ–°é—»æ•°æ®...', 'info');
                try {
                    const newsRes = await fetch('/data/news/2026-01.json');
                    if (!newsRes.ok) throw new Error(`HTTP ${newsRes.status}`);
                    const news = await newsRes.json();
                    log(`âœ… News loaded successfully`, 'success');
                    log(`   - Items: ${news.items?.length}`);
                    log(`   - Month: ${news.month}`);
                } catch (e) {
                    log(`âŒ News failed: ${e.message}`, 'error');
                }

                // Test 3: Load skills
                log('\n3. æµ‹è¯•åŠ è½½æŠ€èƒ½æ•°æ®...', 'info');
                const skillFiles = ['development.json', 'ai-llm.json', 'productivity.json'];
                for (const file of skillFiles) {
                    try {
                        const skillRes = await fetch(`/data/skills/${file}`);
                        if (!skillRes.ok) throw new Error(`HTTP ${skillRes.status}`);
                        const skill = await skillRes.json();
                        log(`âœ… ${file}: ${skill.skills?.length} skills`, 'success');
                    } catch (e) {
                        log(`âŒ ${file}: ${e.message}`, 'error');
                    }
                }

                // Test 4: Load data-loader.js
                log('\n4. æµ‹è¯• data-loader.js...', 'info');
                try {
                    const dlRes = await fetch('/js/data-loader.js');
                    if (!dlRes.ok) throw new Error(`HTTP ${dlRes.status}`);
                    const dlText = await dlRes.text();
                    log(`âœ… data-loader.js loaded (${dlText.length} bytes)`, 'success');
                } catch (e) {
                    log(`âŒ data-loader.js failed: ${e.message}`, 'error');
                }

                log('\n=== æµ‹è¯•å®Œæˆ ===', 'info');

            } catch (error) {
                log(`\nâŒ Fatal error: ${error.message}`, 'error');
                console.error(error);
            }
        }

        // Run test
        testLoading();
    </script>
</body>
</html>
